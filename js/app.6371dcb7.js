(function(e){function t(t){for(var a,n,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==s[l]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},s={app:0},o=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"1b3c":function(e,t,r){"use strict";r("6945")},"1c92":function(e,t,r){e.exports=r.p+"img/track.0817837f.png"},2854:function(e,t,r){},"2d9c":function(e,t,r){},"374f":function(e,t,r){"use strict";r("2d9c")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("0cdd");var a=r("2b0e"),s=r("5f5b"),o=r("b1e0");r("ab8b"),r("2dd8");a["default"].use(s["b"]);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},["UploadPhoto"!=e.$route.name?r("div",{staticClass:"header"},[r("div",{staticClass:"row no-gutters justify-content-center",staticStyle:{height:"38px","background-color":"#00aced"}},["UploadPhoto"!=e.$route.name&&"Login"!=e.$route.name?r("div",{staticClass:"col col-md-4 align-self-center",staticStyle:{"padding-left":"0.5rem"}},[r("b-icon",{staticClass:"mr-1 align-middle",attrs:{icon:"person","font-scale":"1.25"}}),r("span",{staticClass:"align-middle"},[e._v(e._s(this.$store.state.loginData.username||"田中"))])],1):e._e(),e.$route.meta.title?r("div",{staticClass:"col col-md-4 align-self-center text-center text-nowrap text-truncate",staticStyle:{color:"white"}},[r("b",[e._v(e._s(e.$route.meta.title))])]):e._e(),e.$route.meta.prevPath?r("div",{staticClass:"col col-md-4 text-right"},["Users"==e.$route.name?r("b-button",{staticClass:"align-baseline",staticStyle:{"border-radius":"0"},attrs:{variant:"success"}},[r("b-icon",{attrs:{icon:"person-plus"},on:{click:e.registerUser}})],1):e._e(),r("b-button",{staticClass:"align-baseline",staticStyle:{"border-radius":"0"},attrs:{variant:"danger"}},[r("b-icon",{attrs:{icon:"arrow-return-left"},on:{click:e.clickMenuBack}})],1)],1):e._e(),"Menu"==e.$route.name?r("div",{staticClass:"col col-md-4 text-right"},[r("b-button",{staticStyle:{"border-radius":"0"},attrs:{variant:"danger"}},[r("b-icon",{attrs:{icon:"person-x"},on:{click:e.clicklogout}})],1)],1):e._e()])]):e._e(),r("div",{style:"UploadPhoto"==e.$route.name?"":"margin-top:38px;"},[r("router-view")],1)])},i=[],l=(r("caad"),r("d81d"),r("fb6a"),r("b0c0"),r("d3b7"),r("ac1f"),r("2532"),r("1276"),r("498a"),r("2909")),c=(r("c975"),r("2f62"));a["default"].use(c["a"]);var u=new c["a"].Store({state:{loginData:{id:"",username:"",email:"",roles:[],accessToken:""},searchForm:"",updateUser:"",responseData:"",menuPaths:[],commonArea:{}},mutations:{pushMenuPath:function(e,t){e.menuPaths.push(t)},popMenuPath:function(e){return e.menuPaths.pop()},saveCommonArea:function(e,t){var r=t.commonKey,a=t.commonVal;e.commonArea[r]=a},deleteCommonArea:function(e,t){delete e.commonArea[t]},resetCommonArea:function(e,t){for(var r in e.commonArea)r.indexOf(t)>-1&&delete e.commonArea[r]}},actions:{pushMenuPath:function(e,t){var r=e.commit;console.log("actions:pushMenuPath! menuPath="+t),r("pushMenuPath",t)},popMenuPath:function(e){var t=e.commit;return console.log("actions:popMenuPath!"),t("popMenuPath")},saveCommonArea:function(e,t){var r=e.commit,a=t.commonKey,s=t.commonVal;console.log("actions:saveCommonArea! commonKey="+a+", commonVal="+s),r("saveCommonArea",{commonKey:a,commonVal:s})},deleteCommonArea:function(e,t){var r=e.commit;console.log("actions:deleteCommonArea! commonKey="+t),r("deleteCommonArea",t)},resetCommonArea:function(e,t){var r=e.commit;console.log("actions:resetCommonArea! commonKey="+t),r("resetCommonArea",t)}},getters:{getLastMenuPath:function(e){var t=e.menuPaths.length-1,r=e.menuPaths[t];return console.log("getters:getLastMenuPath! pos="+t+", menuPath="+r),r},loadCommonArea:function(e){return function(t){return console.log("getters:loadCommonArea! commonKey="+t),e.commonArea[t]}}}}),d=u,m=r("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{attrs:{"bg-variant":"light"}},[r("div",{staticClass:"row no-gutters justify-content-center"},[r("div",{staticClass:"col col-md-4 text-center"},[r("img",{attrs:{src:e.crossVisionF}})])]),this.$store.state.loginData.accessToken?e._e():r("div",{staticClass:"row no-gutters justify-content-center mb-1"},[r("div",{staticClass:"col col-md-4 d-flex justify-content-center"},[r("b-form-input",{staticClass:"input",attrs:{placeholder:"ユーザ"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterLogin(t)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)]),this.$store.state.loginData.accessToken?e._e():r("div",{staticClass:"row no-gutters justify-content-center"},[r("div",{staticClass:"col col-md-4 align-self-center d-flex justify-content-center"},[r("b-form-input",{staticClass:"input",attrs:{placeholder:"パスワード",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterLogin(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),r("div",{staticClass:"row no-gutters justify-content-center"},[r("div",{staticClass:"col col-md-4 text-center"},[this.$store.state.loginData.accessToken?e._e():r("b-button",{staticClass:"button my-1",on:{click:e.clickLoginFake,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.ctrlEnterLogin(t):null}}},[e._v("ログイン")])],1)]),e.message?r("div",{attrs:{id:"message"}},[r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.message))])],1):e._e()])},p=[],v=(r("96cf"),r("1da1")),f=r("bc3a"),g=r.n(f),b="https://localhost:8443",w={signIn:b+"/api/auth/signin",referUserMany:b+"/UserMaintenance/ReferUserMany",referUserOne:b+"/UserMaintenance/ReferUserOne",registUser:b+"/UserMaintenance/RegistUer",modifyUser:b+"/UserMaintenance/ModifyUer",removeUser:b+"/UserMaintenance/RemoveUer",referRoleAll:b+"/UserMaintenance/ReferRoleAll",referNameCollectionMany:b+"/NameCollection/ReferMany",savePhoto:b+"/PhotoMaintenance/SavePhoto"},D=w;r("99af"),r("25f0");function C(e){function t(e,t){return e>>>t|e<<32-t}for(var r,a,s=Math.pow,o=s(2,32),n="length",i="",l=[],c=8*e[n],u=[],d=[],m=0,h={},p=2;m<64;p++)if(!h[p]){for(r=0;r<313;r+=p)h[r]=p;u[m]=s(p,.5)*o|0,d[m++]=s(p,1/3)*o|0}e+="";while(e[n]%64-56)e+="\0";for(r=0;r<e[n];r++){if(a=e.charCodeAt(r),a>>8)return;l[r>>2]|=a<<(3-r)%4*8}for(l[l[n]]=c/o|0,l[l[n]]=c,a=0;a<l[n];){var v=l.slice(a,a+=16),f=u;for(u=u.slice(0,8),r=0;r<64;r++){var g=v[r-15],b=v[r-2],w=u[0],D=u[4],C=u[7]+(t(D,6)^t(D,11)^t(D,25))+(D&u[5]^~D&u[6])+d[r]+(v[r]=r<16?v[r]:v[r-16]+(t(g,7)^t(g,18)^g>>>3)+v[r-7]+(t(b,17)^t(b,19)^b>>>10)|0),y=(t(w,2)^t(w,13)^t(w,22))+(w&u[1]^w&u[2]^u[1]&u[2]);u=[C+y|0].concat(u),u[4]=u[4]+C|0}for(r=0;r<8;r++)u[r]=u[r]+f[r]|0}for(r=0;r<8;r++)for(a=3;a+1;a--){var k=u[r]>>8*a&255;i+=(k<16?0:"")+k.toString(16)}return i}var y={getHash:C},k={data:function(){return{username:"",password:"",fields:[{key:"username",label:"ユーザ名"},{key:"email",label:"メールアドレス"},{key:"password",label:"パスワード"},{key:"roles",label:"ロール"},{key:"accessToken",label:"トークン"}],message:"",isShowAccessToken:!1,crossVisionF:"CrossVisionF.png"}},methods:{enterLogin:function(){this.clickLogin()},clickLoginFake:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push({path:"/menu"});case 1:case"end":return t.stop()}}),t)})))()},clickLogin:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.login();case 2:if(""==e.$store.state.loginData.id){t.next=8;break}return e.createMenuInfo(),t.next=6,e.referNameCollectionMany();case 6:Ge.saveCommonArea("modeTest",!1),e.$router.push({path:"/menu"});case 8:case"end":return t.stop()}}),t)})))()},ctrlEnterLogin:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShowAccessToken=!0,t.next=3,e.login();case 3:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=y.getHash(e.password),e.message="",t.next=4,g.a.post(D.signIn,{username:e.username,password:r}).then((function(t){t.data.password=r,e.$store.state.loginData=t.data})).catch((function(t){e.message=Ge.getErrorMessage(t)}));case 4:case"end":return t.stop()}}),t)})))()},clickMenu:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShowAccessToken=!1,e.createMenuInfo(),t.next=4,e.referNameCollectionMany();case 4:Ge.saveCommonArea("modeTest",!0),e.$router.push({path:"/menu"});case 6:case"end":return t.stop()}}),t)})))()},logout:function(){this.$store.state.loginData={id:"",username:"",email:"",roles:[],accessToken:""},this.$store.rolesResDt=[],this.$store.rolesResDt=null,this.$store.roleLevelsResDt=[],this.$store.roleLevelsResDt=null},referNameCollectionMany:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],r.push({nameSection:"ProgressBackColorScreen"}),r.push({nameSection:"VisibleMenuItem"}),r.push({nameSection:"VisibleControl"}),a={transId:"",resultCode:null,resultMessage:null,user:null,terminal:null,reqDateTime:null,resDateTime:null,reqDt:r},s={headers:{Authorization:"Bearer "+e.$store.state.loginData.accessToken,"Content-Type":"application/json"}},t.next=8,g.a.post(D.referNameCollectionByPost,a,s).then((function(t){if("000"!=t.data.resultCode)e.message=Ge.getResponseMessage(t);else{var r=Ge.convertProgressBackColorScreen("ProgressBackColorScreen",t.data.resDt);Ge.saveCommonArea("progressBackColorScreen",r);var a=e.getNameSection("VisibleMenuItem",t.data.resDt),s=Ge.loadCommonArea("menuInfoByName");for(var o in a)s[o]&&(s[o].visible="true"==a[o]);Ge.saveCommonArea("menuInfoByName",s);var n=e.getNameSection("VisibleControl",t.data.resDt),i=Ge.loadCommonArea("visibleControlsByMenuCompName");for(var l in null==i&&(i={}),n){var c=i[l];null==c&&(c={});var u=n[l],d=u.split(",");for(var m in d){var h=d[m].trim().split("="),p=h[0].trim(),v="true"==h[1].trim();c[p]=v}i[l]=c}Ge.saveCommonArea("visibleControlsByMenuCompName",i)}})).catch((function(t){e.message=Ge.getErrorMessage(t)}));case 8:case"end":return t.stop()}}),t)})))()},createMenuInfo:function(){var e={},t={},r=this.$router.options.routes;for(var a in r)e[r[a].path]={name:r[a].name,title:r[a].meta.title},t[r[a].name]={path:r[a].path,title:r[a].meta.title,visible:!0};Ge.saveCommonArea("menuInfoByPath",e),Ge.saveCommonArea("menuInfoByName",t)},getNameSection:function(e,t){if(null!=t){var r={};for(var a in t){var s=t[a];s["nameSection"]==e&&(null==r[s["nameAlpha"]]?r[s["nameAlpha"]]=s["nameLong"]:r[s["nameAlpha"]]=r[s["nameAlpha"]]+","+s["nameLong"])}return r}}}},R=k,x=(r("6f7c"),r("2877")),L=Object(x["a"])(R,h,p,!1,null,"5e02c62f",null),S=L.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{attrs:{"bg-variant":"light"}},[r("div",{staticClass:"row no-gutters mb-2"},[r("div",{staticClass:"col col-md-4"},[r("b-form-checkbox",{model:{value:e.enabledTooltip,callback:function(t){e.enabledTooltip=t},expression:"enabledTooltip"}},[e._v("説明")])],1)]),r("div",{staticClass:"row no-gutters justify-content-center"},[r("div",{staticClass:"col col-md-4 text-center"},[r("b-button",{attrs:{id:"photo"},on:{click:function(t){return e.clickMenuForward("/uploadPhoto")}}},[e._v(e._s(e.findRouteTitle("/uploadPhoto")))])],1),r("div",{staticClass:"col col-md-4 text-center"},[r("b-button",{attrs:{id:"users"},on:{click:function(t){return e.clickMenuForward("/users")}}},[e._v(e._s(e.findRouteTitle("/users")))])],1)]),r("div",{staticClass:"row no-gutters justify-content-center mt-1"},[r("div",{staticClass:"col col-md-4 text-center"},[r("b-button",{attrs:{id:"users"},on:{click:function(t){return e.clickMenuForward("/position")}}},[e._v(e._s(e.findRouteTitle("/position")))])],1)]),r("b-tooltip",{attrs:{disabled:e.disabledTooltip,target:"users",triggers:"hover",placement:"bottom",variant:"primary"},on:{"update:disabled":function(t){e.disabledTooltip=t}}},[r("div",{staticClass:"text-left"},[r("font",{attrs:{size:"5"}},[e._v("システムを利用するユーザを登録/更新/削除します。")])],1)]),r("b-tooltip",{attrs:{disabled:e.disabledTooltip,target:"photo",triggers:"hover",placement:"bottom",variant:"primary"},on:{"update:disabled":function(t){e.disabledTooltip=t}}},[r("div",{staticClass:"text-left"},[r("font",{attrs:{size:"5"}},[e._v("工事情報を更新/削除し、工事の選択により"),r("br"),e._v("プライベート工事情報を更新/削除します。")])],1)])],1)},A=[],E=(r("7db0"),{data:function(){return{enabledTooltip:!1,disabledTooltip:!0,menuInfoByName:{}}},watch:{enabledTooltip:function(){this.disabledTooltip=!this.enabledTooltip}},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.menuInfoByName=Ge.loadCommonArea("menuInfoByName"),t=Ge.loadCommonArea("enabledTooltip"),null!=t&&(this.enabledTooltip=t);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){console.log("destroyed 1"),Ge.saveCommonArea("enabledTooltip",this.enabledTooltip)},methods:{window:onload=function(){history.pushState(null,null,location.href),window.addEventListener("popstate",(function(){history.go(1)}))},findRouteTitle:function(e){return this.$router.options.routes.find((function(t){return t.path===e})).meta.title},clickMenuForward:function(e){Ge.clickMenuForward(this.$route.path,e)}}}),T=E,P=Object(x["a"])(T,M,A,!1,null,null,null),j=P.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{attrs:{"bg-variant":"light"}},[r("div",{staticClass:"web-camera-container"},[r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-XS-12"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isCameraOpen&&e.isLoading,expression:"isCameraOpen && isLoading"}],staticClass:"camera-loading"},[r("ul",{staticClass:"loader-circle"},[r("li"),r("li"),r("li")])]),r("div",{staticClass:"camera-box",class:{flash:e.isShotPhoto}},[r("div",{staticClass:"camera-shutter",class:{flash:e.isShotPhoto}}),r("video",{directives:[{name:"show",rawName:"v-show",value:!e.isPhotoTaken,expression:"!isPhotoTaken"}],ref:"video",attrs:{id:"video",autoplay:"",muted:"",playsinline:""},domProps:{muted:!0}}),r("canvas",{directives:[{name:"show",rawName:"v-show",value:e.isPhotoTaken,expression:"isPhotoTaken"}],ref:"canvas",attrs:{id:"photoTaken",width:e.width,height:e.height}})])])],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-XS-8 text-center"},[e.isCameraOpen&&!e.isLoading?r("div",[r("b-button",{attrs:{variant:"info"}},[r("b-icon",{attrs:{icon:"camera","font-scale":"2"},on:{click:e.takePhoto}})],1)],1):e._e()]),r("b-col",{staticClass:"col-XS-3 text-center",staticStyle:{width:"90px"}},[e.isPhotoTaken&&e.isCameraOpen?r("div",[r("b-button",[r("b-icon",{attrs:{icon:"cloud-upload","font-scale":"2",download:"my-photo.jpg"},on:{click:function(t){return e.uploadImage()}}})],1)],1):e._e()]),r("b-col",{staticClass:"col-XS-1 text-center"},[e.isCameraOpen&&!e.isLoading?r("div",[r("b-button",{attrs:{variant:"danger"}},[r("b-icon",{attrs:{icon:"house-door","font-scale":"2"},on:{click:e.clickMenuBack}})],1)],1):e._e()])],1)],1)])},U=[],_=(r("4160"),r("466d"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("159b"),{data:function(){return{isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,link:"#",width:800,height:800}},created:function(){this.toggleCamera()},beforeDestroy:function(){this.isCameraOpen&&this.toggleCamera()},methods:{clickMenuBack:function(){Ge.clickMenuBack()},toggleCamera:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isCameraOpen?(e.isCameraOpen=!1,e.isPhotoTaken=!1,e.isShotPhoto=!1,e.stopCameraStream()):(e.isCameraOpen=!0,e.createCameraElement(),e.getCameraElementSize());case 1:case"end":return t.stop()}}),t)})))()},createCameraElement:function(){var e=this;this.isLoading=!0;var t={audio:!1,video:{facingMode:"environment"}};navigator.mediaDevices.getUserMedia(t).then((function(t){e.isLoading=!1,e.$refs.video.srcObject=t})).catch((function(t){e.isLoading=!1,alert("May the browser didn't support or there is some errors. error="+t)}))},getCameraElementSize:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=document.getElementById("video"),a=0;case 2:if(!(a<20)){t.next=17;break}return t.next=5,Ge.wait(500);case 5:if(null!=r){t.next=9;break}r=document.getElementById("video"),t.next=14;break;case 9:if(null==r.readyState){t.next=14;break}if(!(r.readyState>=HTMLMediaElement.HAVE_METADATA)){t.next=14;break}return e.width=r.videoWidth,e.height=r.videoHeight,t.abrupt("break",17);case 14:a+=1,t.next=2;break;case 17:case"end":return t.stop()}}),t)})))()},stopCameraStream:function(){var e=this.$refs.video.srcObject.getTracks();e.forEach((function(e){e.stop()}))},takePhoto:function(){var e=this;if(!this.isPhotoTaken){this.isShotPhoto=!0;var t=50;setTimeout((function(){e.isShotPhoto=!1}),t)}this.isPhotoTaken=!this.isPhotoTaken;var r=this.$refs.canvas.getContext("2d");r.drawImage(this.$refs.video,0,0,this.width,this.height)},dataUrlToBlob:function(e){var t=e.split(","),r=t[0].match(/:(.*?);/)[1],a=atob(t[1]),s=a.length,o=new Uint8Array(s);while(s--)o[s]=a.charCodeAt(s);var n=new Blob([o],{type:r});return n},uploadImage:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a,s,o,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=document.getElementById("photoTaken"),a=r.getContext("2d"),a.drawImage(r,e.width,e.height),s=r.toDataURL(),o=e.dataUrlToBlob(s),n=new FormData,n.append("image",o),i={headers:{Authorization:"Bearer "+e.$store.state.loginData.accessToken,"Content-Type":"multipart/form-data"}},t.next=10,g.a.post(D.savePhoto,n,i).then((function(t){alert(Ge.getResponseMessage(t)),"000"==t.data.resultCode&&e.takePhoto()})).catch((function(e){alert("例外が発生しました。("+Ge.getErrorMessage(e)+")")}));case 10:case"end":return t.stop()}}),t)})))()}}}),O=_,$=(r("6cb4"),Object(x["a"])(O,I,U,!1,null,"a9311658",null)),B=$.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-card",{attrs:{"bg-variant":"light"}},[r("b-row",{staticClass:"no-gutters"},[r("b-col",[r("b-form",{attrs:{inline:""}},[r("b-form-group",{staticClass:"mr-2",attrs:{label:"ログインユーザ"}},[r("b-form-input",{attrs:{id:"input-user"},model:{value:e.searchForm.loginUser,callback:function(t){e.$set(e.searchForm,"loginUser",t)},expression:"searchForm.loginUser"}})],1),r("b-form-group",{staticClass:"mr-2",attrs:{label:"氏名"}},[r("b-form-input",{attrs:{id:"input-name"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),r("b-form-group",{staticClass:"mr-2",attrs:{label:"業務"}},[r("b-form-select",{attrs:{id:"input-work",options:e.roles},model:{value:e.searchForm.role,callback:function(t){e.$set(e.searchForm,"role",t)},expression:"searchForm.role"}})],1),r("b-form-group",{staticClass:"mr-2",attrs:{label:"役割"}},[r("b-form-select",{attrs:{id:"input-role",options:e.roleLevels},model:{value:e.searchForm.roleLevel,callback:function(t){e.$set(e.searchForm,"roleLevel",t)},expression:"searchForm.roleLevel"}})],1),r("b-form-group",{attrs:{label:"基準日"}},[r("b-datepicker",{attrs:{"today-button":"","reset-button":"","close-button":"","label-today-button":"今日","label-reset-button":"クリア","label-close-button":"キャンセル",placeholder:"日付を選択"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),r("b-form-group",[r("div",{staticStyle:{height:"71px"}},[r("b-button",{staticClass:"ml-1",attrs:{id:"flexButton",variant:"primary"},on:{click:e.searchUser}},[r("b-icon",{attrs:{icon:"search"}}),e._v("検索")],1),r("b-button",{staticClass:"ml-1",attrs:{id:"flexButton",variant:"outline-primary"},on:{click:e.resetSearchForm}},[e._v("クリア")])],1)])],1)],1)],1),r("b-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowUserTable,expression:"isShowUserTable"}],staticClass:"no-gutters mt-2"},[r("b-table",{ref:"tableRefUser",staticClass:"table-sm table-bordered text-nowrap",attrs:{"head-variant":"light","sticky-header":e.table_height,hover:"",responsive:"","selected-variant":"info",selectable:"","select-mode":"single",striped:e.striped,"no-border-collapse":e.noCollapse,items:e.users,fields:e.fields},scopedSlots:e._u([{key:"cell(update)",fn:function(t){return[r("b-link",{staticClass:"button",on:{click:function(r){return e.clickUpdateUser(t.item.userId)}}},[e._v("更新/削除")])]}}])})],1)],1),e.isLoadingUsers?r("div",{staticClass:"text-center text-danger my-2"},[r("b-spinner",{staticClass:"align-middle"}),r("strong",[e._v("検索中...")])],1):e._e(),e.message?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.message))]):e._e()],1)},F=[],H=(r("c740"),r("5530")),z={data:function(){return{striped:!0,noCollapse:!0,searchForm:{loginUser:"",name:"",role:"",roleLevel:"",date:""},roles:[],roleLevels:[],users:[],fields:[],message:"",isLoadingUsers:!1,table_height:"600px",isShowUserTable:!1,currentMenuName:"",searchedUser:!1,selectedRowUserId:""}},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Ge.loadCommonArea("role"),t){e.next=6;break}return e.next=4,this.referRoleAll();case 4:e.next=7;break;case 6:this.setRoles(t);case 7:if(r=Ge.loadCommonArea("roleLevel"),r){e.next=13;break}return e.next=11,this.referNameCollectionMany("RoleLevel");case 11:e.next=14;break;case 13:this.setRoleLevels(r);case 14:this.currentMenuName=Ge.getCurrentMenu(),a=Ge.loadCommonArea(this.currentMenuName+"_selectedRowUserId"),null!=a&&(this.selectedRowUserId=a,Ge.deleteCommonArea(this.currentMenuName+"_selectedRowUserId")),s=Ge.loadCommonArea(this.currentMenuName+"_searchForm"),null!=s&&(this.searchForm=s,Ge.deleteCommonArea(this.currentMenuName+"_searchForm"),this.searchUser());case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{setRoles:function(e){for(var t in e)this.roles.push({value:e[t].roleId,text:e[t].roleName});this.roles.push({value:0,text:"無し"}),this.roles.push({value:"",text:""})},setRoleLevels:function(e){for(var t in e)this.roleLevels.push({value:e[t].codeNumeric,text:e[t].nameShort});this.roleLevels.push({value:"",text:""})},referRoleAll:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={headers:{Authorization:"Bearer "+e.$store.state.loginData.accessToken,"Content-Type":"application/json"}},t.next=3,g.a.get(D.referRoleAll,r).then((function(t){"000"==t.data.resultCode?(Ge.saveCommonArea("role",t.data.resDt),e.setRoles(t.data.resDt)):e.message=Ge.getResponseMessage(t)})).catch((function(t){e.message=Ge.getErrorMessage(t)}));case 3:case"end":return t.stop()}}),t)})))()},referNameCollectionMany:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={headers:{Authorization:"Bearer "+t.$store.state.loginData.accessToken,"Content-Type":"application/json"},params:{nameSection:e}},r.next=3,g.a.get(D.referNameCollectionMany,a).then((function(r){"000"==r.data.resultCode?"RoleLevel"==e&&(Ge.saveCommonArea("roleLevel",r.data.resDt),t.setRoleLevels(r.data.resDt)):t.message=Ge.getResponseMessage(r)})).catch((function(e){t.message=Ge.getErrorMessage(e)}));case 3:case"end":return r.stop()}}),r)})))()},searchUser:function(){var e=this;this.isLoadingUsers=!0,this.message="",this.users=[],this.fields=[],this.searchedUser=!1;var t=Object(H["a"])(Object(H["a"])(Object(H["a"])(Object(H["a"])(Object(H["a"])({},this.searchForm.loginUser&&{loginUser:this.searchForm.loginUser}),this.searchForm.name&&{name:this.searchForm.name}),""!==this.searchForm.role&&{roleId:this.searchForm.role}),this.searchForm.roleLevel&&{roleLevel:this.searchForm.roleLevel}),this.searchForm.date&&{targetDate:this.searchForm.date.replaceAll("-","/")}),r={headers:{Authorization:"Bearer "+this.$store.state.loginData.accessToken,"Content-Type":"application/json"},params:t};g.a.get(D.referUserMany,r).then((function(t){e.users=t.data.resDt,e.fields=e.createFields(t.data.resDtTitle),"000"!=t.data.resultCode?e.message=Ge.getResponseMessage(t):(e.isShowUserTable=!0,e.searchedUser=!0)})).catch((function(t){e.message=Ge.getErrorMessage(t)})).finally((function(){if(e.isLoadingUsers=!1,e.selectedRowUserId){var t=e.users.findIndex((function(t){return t.userId===e.selectedRowUserId}));if(t>-1){e.$refs.tableRefUser.selectRow(t);var r=e.$refs.tableRefUser.$el.querySelector("tbody"),a=r.querySelectorAll("tr")[t];a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}else e.selectedRowUserId=""}}))},registerUser:function(){this.$store.state.responseData="",1==this.searchedUser&&Ge.saveCommonArea(this.currentMenuName+"_searchForm",this.searchForm),Ge.clickMenuForward(this.$route.path,"userregister")},clickUpdateUser:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.selectedRowUserId=e,Ge.saveCommonArea(t.currentMenuName+"_selectedRowUserId",t.selectedRowUserId),r.next=4,t.updateUser(e);case 4:case"end":return r.stop()}}),r)})))()},updateUser:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={userId:e},s={headers:{Authorization:"Bearer "+t.$store.state.loginData.accessToken,"Content-Type":"application/json"},params:a},r.next=4,g.a.get(D.referUserOne,s).then((function(r){"000"!=r.data.resultCode?t.message=Ge.getResponseMessage(r):(r.data.resHd.userId=e,t.$store.state.responseData=r.data,1==t.searchedUser&&Ge.saveCommonArea(t.currentMenuName+"_searchForm",t.searchForm),Ge.clickMenuForward(t.$route.path,"userupdate"))})).catch((function(e){t.message=Ge.getErrorMessage(e)}));case 4:case"end":return r.stop()}}),r)})))()},resetSearchForm:function(){this.searchForm={loginUser:"",name:"",work:"",role:"",date:""},this.searchedUser=!1},createFields:function(e,t){var r=[],a=[];for(var s in e)r.push({key:s,label:e[s]});if(r.push({key:"update",label:""}),t){for(var o in t)a.push(r[t[o]]);return a}return r}}},q=z,W=(r("8116"),Object(x["a"])(q,N,F,!1,null,"811fbb7e",null)),V=W.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"container-fluid"},[r("b-card",{attrs:{"bg-variant":"light"}},[r("b-row",[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"ログインユーザ","label-for":"input-user","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-user"},model:{value:e.view.loginUser,callback:function(t){e.$set(e.view,"loginUser",t)},expression:"view.loginUser"}})],1)],1)],1),r("b-row",[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"氏名","label-for":"input-name","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-name"},model:{value:e.view.name,callback:function(t){e.$set(e.view,"name",t)},expression:"view.name"}})],1)],1)],1),r("b-row",[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"パスワード","label-for":"input-password","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-password",type:"password"},model:{value:e.view.password,callback:function(t){e.$set(e.view,"password",t)},expression:"view.password"}})],1)],1)],1),r("b-row",[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"パスワード（確認）","label-for":"inpu-password-confirm","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-password-confirm",type:"password"},model:{value:e.view.passwordConfirm,callback:function(t){e.$set(e.view,"passwordConfirm",t)},expression:"view.passwordConfirm"}})],1)],1)],1),r("b-row",[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"メールアドレス","label-for":"input-email","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-email",type:"email"},model:{value:e.view.email,callback:function(t){e.$set(e.view,"email",t)},expression:"view.email"}})],1)],1),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"開始日","label-for":"input-date-start","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-start",type:"date",max:"9999-12-31"},model:{value:e.view.startDate,callback:function(t){e.$set(e.view,"startDate",t)},expression:"view.startDate"}})],1)],1)],1),r("b-row",[r("b-col",{staticClass:"col-md-5"}),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"終了日","label-for":"input-date-end","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-end",type:"date",max:"9999-12-31"},model:{value:e.view.endDate,callback:function(t){e.$set(e.view,"endDate",t)},expression:"view.endDate"}})],1)],1)],1)],1),r("b-card",{attrs:{"bg-variant":"light"}},[r("b-row",[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"日報管理","label-cols-sm":"3","label-align-sm":"right"}})],1)],1),r("b-row",[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"権限","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-select",{attrs:{value:e.view.roles[0].roleLevel,options:e.roleLevels},on:{change:function(t){return e.processRoleChange(e.view.roles[0].roleLevel,t)}}})],1)],1),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"開始日","label-for":"input-date-start-process","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-start-process",type:"date",max:"9999-12-31"},model:{value:e.view.roles[0].userRoleStartDate,callback:function(t){e.$set(e.view.roles[0],"userRoleStartDate",t)},expression:"view.roles[0].userRoleStartDate"}})],1)],1)],1),r("b-row",[r("b-col",{staticClass:"col-md-5"}),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"終了日","label-for":"input-date-end-process","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-end-process",type:"date",max:"9999-12-31"},model:{value:e.view.roles[0].userRoleEndDate,callback:function(t){e.$set(e.view.roles[0],"userRoleEndDate",t)},expression:"view.roles[0].userRoleEndDate"}})],1)],1)],1)],1)],1),e.message?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.message))]):e._e(),r("div",{staticClass:"text-right mt-1"},[r("b-button",{staticClass:"mr-1",attrs:{disabled:!e.responseData},on:{click:e.updateUser}},[e._v("更新")]),r("b-button",{staticClass:"mr-1",attrs:{disabled:!e.responseData},on:{click:e.deleteUser}},[e._v("削除")])],1)],1)},G=[],J={data:function(){return{responseData:"",view:{loginUser:"",password:"",passwordConfirm:"",name:"",email:"",startDate:"",endDate:"",roles:[{roleId:1,roleLevel:0,userRoleStartDate:"",userRoleEndDate:""},{roleId:2,roleLevel:0,userRoleStartDate:"",userRoleEndDate:""}]},message:"",roleLevels:[],showDailyReport:!1}},created:function(){this.$store.state.responseData&&(this.responseData=this.$store.state.responseData,this.view.loginUser=this.responseData.resHd.loginUser,this.view.name=this.responseData.resHd.name,this.view.email=this.responseData.resHd.email,this.view.startDate=this.responseData.resHd.startDate,this.view.endDate=this.responseData.resHd.endDate,2==this.responseData.resDt.length&&(this.view.roles[0].roleId=1,this.view.roles[0].roleLevel=this.responseData.resDt[0].roleLevel,this.view.roles[0].userRoleStartDate=this.responseData.resDt[0].userRoleStartDate,this.view.roles[0].userRoleEndDate=this.responseData.resDt[0].userRoleEndDate,this.view.roles[1].roleId=2,this.view.roles[1].roleLevel=this.responseData.resDt[1].roleLevel,this.view.roles[1].userRoleStartDate=this.responseData.resDt[1].userRoleStartDate,this.view.roles[1].userRoleEndDate=this.responseData.resDt[1].userRoleEndDate),1==this.responseData.resDt.length&&1==this.responseData.resDt[0].roleId&&(this.view.roles[0].roleId=1,this.view.roles[0].roleLevel=this.responseData.resDt[0].roleLevel,this.view.roles[0].userRoleStartDate=this.responseData.resDt[0].userRoleStartDate,this.view.roles[0].userRoleEndDate=this.responseData.resDt[0].userRoleEndDate),1==this.responseData.resDt.length&&2==this.responseData.resDt[0].roleId&&(this.view.roles[1].roleId=2,this.view.roles[1].roleLevel=this.responseData.resDt[0].roleLevel,this.view.roles[1].userRoleStartDate=this.responseData.resDt[0].userRoleStartDate,this.view.roles[1].userRoleEndDate=this.responseData.resDt[0].userRoleEndDate)),this.setRoleLevels()},methods:{setRoleLevels:function(){var e=Ge.loadCommonArea("roleLevel");if(e){for(var t in e)this.roleLevels.push({value:e[t].codeNumeric,text:e[t].nameShort});this.roleLevels.push({value:"",text:""})}else console.log("setRoleLevels() commonMethods.loadCommonArea('roleLevel') is nothing !")},getNow:function(){var e=new Date(Date.now()),t=60*e.getTimezoneOffset()*1e3,r=new Date(e-t);return r.toISOString().slice(0,10)},processRoleChange:function(e,t){!e&&t&&(this.view.roles[0].userRoleStartDate=this.view.startDate,this.view.roles[0].userRoleEndDate=this.view.endDate),e&&!t&&(this.view.roles[0].userRoleStartDate="",this.view.roles[0].userRoleEndDate=""),this.view.roles[0].roleLevel=t},reportRoleChange:function(e,t){!e&&t&&(this.view.roles[1].userRoleStartDate=this.view.startDate,this.view.roles[1].userRoleEndDate=this.view.endDate),e&&!t&&(this.view.roles[1].userRoleStartDate="",this.view.roles[1].userRoleEndDate=""),this.view.roles[1].roleLevel=t},updateUser:function(){var e=this,t=Object.assign({},this.responseData);if(confirm("更新しますか？")){var r={transId:"",resultCode:null,resultMessage:null,user:null,terminal:null,reqDateTime:null,resDateTime:null,reqHd:Object(H["a"])(Object(H["a"])(Object(H["a"])(Object(H["a"])(Object(H["a"])(Object(H["a"])(Object(H["a"])(Object(H["a"])({},this.responseData.resHd.userId&&{userId:this.responseData.resHd.userId}),this.view.loginUser&&{loginUser:this.view.loginUser}),this.view.password&&{password:y.getHash(this.view.password)}),this.view.name&&{name:this.view.name}),this.view.email&&{email:this.view.email}),this.view.startDate&&{startDate:this.view.startDate}),this.view.endDate&&{endDate:this.view.endDate}),this.responseData.resHd.updDatetime&&{updDatetime:this.responseData.resHd.updDatetime})},a=[];this.view.roles[0].roleLevel>0&&0==t.resDt.length||this.view.roles[0].roleLevel>0&&1==t.resDt.length&&1!=t.resDt[0].roleId?(console.log("工程管理．登録"),a.push({action:1,roleId:1,roleLevel:this.view.roles[0].roleLevel,userRoleStartDate:this.view.roles[0].userRoleStartDate,userRoleEndDate:this.view.roles[0].userRoleEndDate,updDatetime:null})):(this.view.roles[0].roleLevel>0&&1==t.resDt.length&&1==t.resDt[0].roleId&&t.resDt[0].roleLevel!==this.view.roles[0].roleLevel||this.view.roles[0].roleLevel>0&&2==t.resDt.length&&t.resDt[0].roleLevel!==this.view.roles[0].roleLevel||this.view.roles[0].roleLevel>0&&t.resDt.length>0&&(this.view.roles[0].userRoleStartDate!=this.responseData.resDt[0].userRoleStartDate||this.view.roles[0].userRoleEndDate!=this.responseData.resDt[0].userRoleEndDate))&&(console.log("工程管理．更新"),a.push({action:2,roleId:1,roleLevel:this.view.roles[0].roleLevel,userRoleStartDate:this.view.roles[0].userRoleStartDate,userRoleEndDate:this.view.roles[0].userRoleEndDate,updDatetime:t.resDt[0].updDatetime})),(0==this.view.roles[0].roleLevel&&1==t.resDt.length&&1==t.resDt[0].roleId||0==this.view.roles[0].roleLevel&&2==t.resDt.length)&&(console.log("工程管理．削除"),a.push({action:3,roleId:1,roleLevel:null,userRoleStartDate:this.view.roles[0].userRoleStartDate,userRoleEndDate:this.view.roles[0].userRoleEndDate,updDatetime:t.resDt[0].updDatetime})),this.view.roles[1].roleLevel>0&&0==t.resDt.length||this.view.roles[1].roleLevel>0&&1==t.resDt.length&&2!=t.resDt[0].roleId?(console.log("日報管理．登録"),a.push({action:1,roleId:2,roleLevel:this.view.roles[1].roleLevel,userRoleStartDate:this.view.roles[1].userRoleStartDate,userRoleEndDate:this.view.roles[1].userRoleEndDate,updDatetime:null})):this.view.roles[1].roleLevel>0&&1==t.resDt.length&&2==t.resDt[0].roleId&&t.resDt[0].roleLevel!==this.view.roles[1].roleLevel||this.view.roles[1].roleLevel>0&&1==t.resDt.length&&(this.view.roles[1].userRoleStartDate!=this.responseData.resDt[0].userRoleStartDate||this.view.roles[1].userRoleEndDate!=this.responseData.resDt[0].userRoleEndDate)?(console.log("日報管理．更新"),a.push({action:2,roleId:2,roleLevel:this.view.roles[1].roleLevel,userRoleStartDate:this.view.roles[1].userRoleStartDate,userRoleEndDate:this.view.roles[1].userRoleEndDate,updDatetime:t.resDt[0].updDatetime})):(this.view.roles[1].roleLevel>0&&2==t.resDt.length&&2==t.resDt[1].roleId&&t.resDt[1].roleLevel!==this.view.roles[1].roleLevel||this.view.roles[1].roleLevel>0&&2==t.resDt.length&&(this.view.roles[1].userRoleStartDate!=this.responseData.resDt[1].userRoleStartDate||this.view.roles[1].userRoleEndDate!=this.responseData.resDt[1].userRoleEndDate))&&(console.log("日報管理．更新"),a.push({action:2,roleId:2,roleLevel:this.view.roles[1].roleLevel,userRoleStartDate:this.view.roles[1].userRoleStartDate,userRoleEndDate:this.view.roles[1].userRoleEndDate,updDatetime:t.resDt[1].updDatetime})),0==this.view.roles[1].roleLevel&&1==t.resDt.length&&2==t.resDt[0].roleId?(console.log("日報管理．削除"),a.push({action:3,roleId:2,roleLevel:null,userRoleStartDate:this.view.roles[1].userRoleStartDate,userRoleEndDate:this.view.roles[1].userRoleEndDate,updDatetime:t.resDt[0].updDatetime})):0==this.view.roles[1].roleLevel&&2==t.resDt.length&&(console.log("日報管理．削除"),a.push({action:3,roleId:2,roleLevel:null,userRoleStartDate:this.view.roles[1].userRoleStartDate,userRoleEndDate:this.view.roles[1].userRoleEndDate,updDatetime:t.resDt[1].updDatetime})),a&&(r.reqDt=a);var s={headers:{Authorization:"Bearer "+this.$store.state.loginData.accessToken,"Content-Type":"application/json"}};this.view.password!==this.view.passwordConfirm?alert("パスワードとパスワード（確認）が一致していません。"):g.a.put(D.modifyUser,r,s).then((function(t){"000"!=t.data.resultCode?e.message=Ge.getResponseMessage(t):(alert(t.data.resultMessage),e.$store.state.responseData="",Ge.clickMenuBack())})).catch((function(t){e.message=Ge.getErrorMessage(t)}))}},deleteUser:function(){var e=this;if(confirm("削除しますか？")){var t={tranId:"",resultCode:null,resultMessage:null,user:null,terminal:null,reqDateTime:null,resDateTime:null,reqHd:{userId:this.responseData.resHd.userId,updDatetime:this.responseData.resHd.updDatetime}},r={headers:{Authorization:"Bearer "+this.$store.state.loginData.accessToken,"Content-Type":"application/json"},data:t};g.a.delete(D.removeUser,r).then((function(t){"000"!=t.data.resultCode?e.message=Ge.getResponseMessage(t):(alert(t.data.resultMessage),e.$store.state.responseData="",Ge.clickMenuBack())})).catch((function(t){e.message=Ge.getErrorMessage(t)}))}}}},X=J,Q=(r("374f"),Object(x["a"])(X,K,G,!1,null,"277a999e",null)),Y=Q.exports,Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"margin-bottom":"38px"}},[r("div",[r("b-card",{staticClass:"mb-1",attrs:{"bg-variant":"light"}},[r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"ログインユーザ","label-for":"input-user","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-user"},model:{value:e.view.loginUser,callback:function(t){e.$set(e.view,"loginUser",t)},expression:"view.loginUser"}})],1)],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"氏名","label-for":"input-name","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-name"},model:{value:e.view.name,callback:function(t){e.$set(e.view,"name",t)},expression:"view.name"}})],1)],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"パスワード","label-for":"input-password","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-password",type:"password"},model:{value:e.view.password,callback:function(t){e.$set(e.view,"password",t)},expression:"view.password"}})],1)],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"パスワード（確認）","label-for":"inpu-password-confirm","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-password-confirm",type:"password"},model:{value:e.view.passwordConfirm,callback:function(t){e.$set(e.view,"passwordConfirm",t)},expression:"view.passwordConfirm"}})],1)],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"メールアドレス","label-for":"input-email","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-email",type:"email"},model:{value:e.view.email,callback:function(t){e.$set(e.view,"email",t)},expression:"view.email"}})],1)],1),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"開始日","label-for":"input-date-start","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-start",type:"date",max:"9999-12-31"},model:{value:e.view.startDate,callback:function(t){e.$set(e.view,"startDate",t)},expression:"view.startDate"}})],1)],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"}),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"終了日","label-for":"input-date-end","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-end",type:"date",max:"9999-12-31"},model:{value:e.view.endDate,callback:function(t){e.$set(e.view,"endDate",t)},expression:"view.endDate"}}),r("br")],1)],1)],1)],1),r("b-card",{attrs:{"bg-variant":"light"}},[r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"日報管理","label-cols-sm":"3","label-align-sm":"right"}})],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"権限","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-select",{attrs:{value:e.view.roles[0].roleLevel,options:e.roleLevels},on:{change:function(t){return e.processRoleChange(e.view.roles[0].roleLevel,t)}}})],1)],1),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"開始日","label-for":"input-date-start-process","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-start-process",type:"date",max:"9999-12-31"},model:{value:e.view.roles[0].userRoleStartDate,callback:function(t){e.$set(e.view.roles[0],"userRoleStartDate",t)},expression:"view.roles[0].userRoleStartDate"}})],1)],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"}),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"終了日","label-for":"input-date-end-process","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-end-process",type:"date",max:"9999-12-31"},model:{value:e.view.roles[0].userRoleEndDate,callback:function(t){e.$set(e.view.roles[0],"userRoleEndDate",t)},expression:"view.roles[0].userRoleEndDate"}})],1)],1)],1)],1),r("b-card",{directives:[{name:"show",rawName:"v-show",value:e.showDailyReport,expression:"showDailyReport"}],attrs:{"bg-variant":"light"}},[r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"日報管理","label-cols-sm":"3","label-align-sm":"right"}})],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"権限","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-select",{attrs:{value:e.view.roles[1].roleLevel,options:e.roleLevels},on:{change:function(t){return e.reportRoleChange(e.view.roles[1].roleLevel,t)}}})],1)],1),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"開始日","label-for":"input-date-start-report","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-start-report",type:"date",max:"9999-12-31"},model:{value:e.view.roles[1].userRoleStartDate,callback:function(t){e.$set(e.view.roles[1],"userRoleStartDate",t)},expression:"view.roles[1].userRoleStartDate"}})],1)],1)],1),r("b-row",{staticClass:"no-gutters"},[r("b-col",{staticClass:"col-md-5"}),r("b-col",{staticClass:"col-md-5"},[r("b-form-group",{attrs:{label:"終了日","label-for":"input-date-end-report","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{id:"input-date-end-report",type:"date",max:"9999-12-31"},model:{value:e.view.roles[1].userRoleEndDate,callback:function(t){e.$set(e.view.roles[1],"userRoleEndDate",t)},expression:"view.roles[1].userRoleEndDate"}})],1)],1)],1)],1)],1),e.message?r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.message))]):e._e(),r("div",{staticClass:"footer text-center"},[r("b-button",{on:{click:e.registerUser}},[e._v("登録")])],1)],1)},ee=[],te={data:function(){return{message:"",view:{loginUser:"",password:"",passwordConfirm:"",name:"",email:"",startDate:"",endDate:"9999-12-31",roles:[{roleId:1,roleLevel:0,userRoleStartDate:"",userRoleEndDate:""},{roleId:2,roleLevel:0,userRoleStartDate:"",userRoleEndDate:""}]},roleLevels:[],showDailyReport:!1}},created:function(){this.view.startDate=this.getNow(),this.setRoleLevels()},methods:{getNow:function(){var e=new Date(Date.now()),t=60*e.getTimezoneOffset()*1e3,r=new Date(e-t);return r.toISOString().slice(0,10)},setRoleLevels:function(){var e=Ge.loadCommonArea("roleLevel");if(e){for(var t in e)this.roleLevels.push({value:e[t].codeNumeric,text:e[t].nameShort});this.roleLevels.push({value:"",text:""})}else console.log("setRoleLevels() commonMethods.loadCommonArea('roleLevel') is nothing !")},processRoleChange:function(e,t){!e&&t&&(this.view.roles[0].userRoleStartDate=this.view.startDate,this.view.roles[0].userRoleEndDate=this.view.endDate),e&&!t&&(this.view.roles[0].userRoleStartDate="",this.view.roles[0].userRoleEndDate=""),this.view.roles[0].roleLevel=t},reportRoleChange:function(e,t){!e&&t&&(this.view.roles[1].userRoleStartDate=this.view.startDate,this.view.roles[1].userRoleEndDate=this.view.endDate),e&&!t&&(this.view.roles[1].userRoleStartDate="",this.view.roles[1].userRoleEndDate=""),this.view.roles[1].roleLevel=t},registerUser:function(){var e=this;if(this.message="",confirm("登録しますか？")){var t={transId:"",resultCode:null,resultMessage:null,user:null,terminal:null,reqDateTime:null,resDateTime:null,reqHd:{loginUser:this.view.loginUser,password:""!=this.view.password?y.getHash(this.view.password):"",name:this.view.name,email:this.view.email,startDate:this.view.startDate,endDate:this.view.endDate}};(this.view.roles[0].roleLevel>0||this.view.roles[1].roleLevel>0)&&(t.reqDt=[]),this.view.roles[0].roleLevel>0&&this.view.roles[1].roleLevel>0&&(t.reqDt=this.view.roles),this.view.roles[0].roleLevel>0&&0==this.view.roles[1].roleLevel&&(t.reqDt[0]=this.view.roles[0]),0==this.view.roles[0].roleLevel&&this.view.roles[1].roleLevel>0&&(t.reqDt[0]=this.view.roles[1]);var r={headers:{Authorization:"Bearer "+this.$store.state.loginData.accessToken,"Content-Type":"application/json"}};this.view.password!==this.view.passwordConfirm?alert("パスワードとパスワード（確認）が一致していません。"):g.a.post(D.registUser,t,r).then((function(t){"000"!=t.data.resultCode?e.message=Ge.getResponseMessage(t):(alert(t.data.resultMessage),e.$store.state.responseData="",Ge.clickMenuBack())})).catch((function(t){e.message=Ge.getErrorMessage(t)}))}}}},re=te,ae=(r("1b3c"),Object(x["a"])(re,Z,ee,!1,null,"7723642c",null)),se=ae.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{attrs:{"bg-variant":"light"}},[a("div",{staticClass:"row no-gutters p-1",staticStyle:{"align-items":"flex-start",background:"antiquewhite"}},[a("label",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{for:"checkbox"}},[e._v("丁単位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.enable,expression:"enable"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(e.enable)?e._i(e.enable,null)>-1:e.enable},on:{change:function(t){var r=e.enable,a=t.target,s=!!a.checked;if(Array.isArray(r)){var o=null,n=e._i(r,o);a.checked?n<0&&(e.enable=r.concat([o])):n>-1&&(e.enable=r.slice(0,n).concat(r.slice(n+1)))}else e.enable=s}}}),a("div",{staticClass:"addressMethod pr-1"},[a("b-form-group",{staticStyle:{"margin-bottom":"0"},attrs:{label:"住所特定法","label-class":"font-weight-bold"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.ariaDescribedby;return[a("b-form-radio",{attrs:{"aria-describedby":r,value:"box"},model:{value:e.addressMethod,callback:function(t){e.addressMethod=t},expression:"addressMethod"}},[e._v("長方形")]),a("b-form-radio",{attrs:{"aria-describedby":r,value:"polygon"},model:{value:e.addressMethod,callback:function(t){e.addressMethod=t},expression:"addressMethod"}},[e._v("多角形")])]}}])})],1),a("div",{staticClass:"buttonBlock pr-1"},[a("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"info"},on:{click:e.getPosition}},[a("b-icon",{attrs:{icon:"geo-alt"}})],1),a("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"info"},on:{click:e.fitMap}},[a("b-icon",{attrs:{icon:"textarea-resize"}})],1),a("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"info"},on:{click:e.playAudioMessage}},[a("b-icon",{attrs:{icon:"play-btn"}})],1)],1),a("div",{staticClass:"watch d-flex px-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.watchInterval,expression:"watchInterval"}],domProps:{value:e.watchInterval},on:{input:function(t){t.target.composing||(e.watchInterval=t.target.value)}}}),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.watcherId,expression:"!watcherId"}],staticClass:"mt-1",attrs:{size:"sm"},on:{click:e.startWatch}},[a("b-icon",{attrs:{icon:"play-circle"}})],1),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.watcherId,expression:"watcherId"}],staticClass:"mt-1",attrs:{size:"sm",variant:"danger"},on:{click:e.stopWatch}},[a("b-icon",{attrs:{icon:"stop-circle"}})],1)],1),e.watcherId?a("div",{staticClass:"pl-1 d-flex",staticStyle:{color:"green"}},[e._v(" 計"+e._s(e.timer)+"分 ")]):e._e()]),a("span",{staticClass:"d-flex mb-1",staticStyle:{background:"antiquewhite"},style:e.isPosError?"color:red;":"color:blue;"},[e._v(" "+e._s(e.position)+" ")]),a("l-map",{ref:"map",staticStyle:{height:"50vh"}},[a("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),a("l-marker",{ref:"trackMarker",attrs:{"lat-lng":e.track},on:{click:e.clickTrack}},[a("l-icon",{attrs:{"icon-url":r("1c92"),"icon-size":[32,41]}}),a("l-popup",{attrs:{content:"運搬車01"}})],1),e._l(e.warehouses,(function(t){return a("l-marker",{key:t.name,attrs:{"lat-lng":t},on:{click:e.clickPlace}},[a("l-icon",{attrs:{"icon-url":r("d726"),"icon-size":[38,38]}}),a("l-popup",{attrs:{content:t.jname}})],1)})),a("l-geo-json",{ref:"geojson",attrs:{geojson:e.geojson,options:e.geojsonOptions}})],2),a("b-modal",{ref:"modal",attrs:{"hide-footer":"",title:"エリア情報"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[e._v(e._s(e.selectedFeature&&(e.selectedFeature.ward_ja||e.selectedFeature.GST_NAME)))]),a("p",[e._v(e._s(e.selectedFeature))])]),a("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:e.hideModal}},[e._v("Close")])],1),a("b-table-lite",{staticClass:"placeInfo mt-1",attrs:{small:"","thead-class":"d-none",items:e.placeInfo},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[a("b-button",{staticStyle:{width:"45px",height:"45px"},attrs:{variant:"info"},on:{click:function(r){return e.takePhoto(t)}}},[a("b-icon",{attrs:{icon:"camera"}})],1)]}}])})],1)},ne=[],ie=(r("4de4"),r("b680"),r("b85c")),le=r("e11e"),ce=r.n(le),ue=r("2699"),de=r("a40a"),me=r("4e2b"),he=r("044a"),pe=r("f60f"),ve=r("fbba"),fe=r("7107"),ge=r.n(fe),be={components:{LMap:ue["a"],LTileLayer:de["a"],LMarker:me["a"],LGeoJson:he["a"],LPopup:pe["a"],LIcon:ve["a"]},data:function(){var e=this;return{position:"",watchCount:0,watcherId:null,watchInterval:30,timer:0,timerId:null,isPosError:!1,enable:!1,addressMethod:"box",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15,center:{lng:139.76721063067993,lat:35.68198566590147},selectedFeature:{},geojson:null,myLayer:null,geojsonOptions:{style:function(){return{fillColor:"#FC4E2A",weight:1,opacity:1,color:"blue",dashArray:"3",fillOpacity:0}},onEachFeature:function(t,r){r.on({click:e.clickFeature})}},track:{},warehouses:[{name:"WH01",jname:"倉庫01",lng:139.72112,lat:35.683332,action:""},{name:"WH02",jname:"倉庫02",lng:139.721463,lat:35.712329,action:""},{name:"WH03",jname:"倉庫03",lng:139.765065,lat:35.694207,action:""},{name:"WH04",jname:"倉庫04",lng:139.743,lat:35.67161,action:""},{name:"WH05",jname:"倉庫05",lng:139.822056,lat:35.679986,action:""},{name:"WH06",jname:"倉庫06",lng:139.822056,lat:35.679986,action:""}],placeInfo:[],audioMessage:new Audio(r("d863"))}},created:function(){var e=this;this.loadGeojson(),this.updateTrackPosition(this.center),this.audioMessage.addEventListener("playing",(function(){e.position="再生中..."})),this.audioMessage.addEventListener("ended",(function(){e.position=""}))},mounted:function(){var e=this;navigator.serviceWorker.getRegistrations().then((function(t){t.length||(e.position="PWAではありません")})),navigator.serviceWorker.ready.then((function(t){t.sync?e.position="バックグラウンド処理対応":(e.isPosError=!0,e.position="バックグラウンド処理非対応")})),this.myLayer=ce.a.geoJSON(null,{style:function(e){return"LineString"==e.geometry.type?{color:"green",dashArray:"4"}:{color:"red",fillOpacity:0}}}).addTo(this.$refs.map.mapObject),this.$refs.map.mapObject.panTo(this.center),this.fitMap()},methods:{loadGeojson:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("tokyo.json").then((function(e){return e.json()})).then((function(t){e.geojson=t}));case 2:case"end":return t.stop()}}),t)})))()},startWatch:function(){var e=this;this.watcherId&&this.stopWatch(),this.timerId=setInterval((function(){e.timer+=1}),6e4),this.getPosition(),this.watcherId=setInterval(this.getPosition,60*this.watchInterval*1e3)},stopWatch:function(){clearInterval(this.watcherId),clearInterval(this.timerId),this.watcherId=null,this.timerId=null,this.position="追跡終了",this.timer=0,this.watchCount=0},showModal:function(){this.$refs.modal.show()},hideModal:function(){this.$refs.modal.hide()},highlightFeature:function(e){var t=e.target;t.setStyle({fillColor:"green",weight:5,color:"#666",dashArray:"",fillOpacity:.3}),ce.a.Browser.ie||ce.a.Browser.opera||ce.a.Browser.edge||t.bringToFront()},resetHighlight:function(e){var t=e.target;t.setStyle({fillColor:"#FC4E2A",weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.3}),ce.a.Browser.ie||ce.a.Browser.opera||ce.a.Browser.edge||t.bringToFront()},clickFeature:function(e){var t=e.target&&e.target.feature,r=t&&t.properties;this.selectedFeature=r,this.showModal()},updateTrackPosition:function(e){this.track={name:"TR01",jname:"運搬車01",lng:e.lng,lat:e.lat,action:""}},playAudioMessage:function(){this.audioMessage.currentTime=0,this.audioMessage.play()},fitMap:function(){var e=this.warehouses.concat(this.track);this.$refs.map.mapObject.fitBounds(e)},takePhoto:function(e){alert("".concat(e.item.jname,"で撮影する処理"))},clickPlace:function(e){var t=e.latlng.lat,r=e.latlng.lng;this.placeInfo=this.warehouses.filter((function(e){return e.lat==t&&e.lng==r}))},clickTrack:function(){this.placeInfo=[this.track]},getPosition:function(){this.isPosError=!1,this.position="位置取得中...",navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionSuccess,this.positionError,{timeout:5e3}):(this.isPosError=!0,this.position="ブラウザー非対応")},watchPosition:function(){navigator.geolocation?navigator.geolocation.watchPosition(this.watchPositionSuccess,this.positionError,{enableHighAccuracy:!0,timeout:1e6,maximumAge:0}):(this.isPosError=!0,this.position="ブラウザー非対応")},positionSuccess:function(e){this.isPosError=!1,this.watchCount++,this.position="経度: ".concat(e.coords.longitude.toFixed(2)," 緯度: ").concat(e.coords.latitude.toFixed(2)," (").concat(this.watchCount,")"),this.updateTrackPosition({lng:e.coords.longitude,lat:e.coords.latitude});var t=this.searchAdress(this.track);t&&(this.position+=" / ".concat(t)),0===this.myLayer.getLayers().length?this.$refs.map.mapObject.fitBounds([{lng:e.coords.longitude,lat:e.coords.latitude}]):this.$refs.map.mapObject.fitBounds([this.myLayer.getBounds()])},watchPositionSuccess:function(e){this.isPosError=!1,this.watchCount++,this.position="経度: ".concat(e.coords.longitude.toFixed(2)," 緯度: ").concat(e.coords.latitude.toFixed(2)," (").concat(this.watchCount,")"),this.setTrackPosition({lng:e.coords.longitude,lat:e.coords.latitude})},positionError:function(e){this.isPosError=!0;var t=["原因不明のエラーが発生しました","位置情報の取得が許可されません","電波状況などで位置情報が取得できません","位置情報の取得に時間がかかり過ぎてタイムアウトしました"];this.position="".concat(t[e.code])},setTrackPosition:function(e){this.updateTrackPosition(e),this.$refs.map.mapObject.fitBounds([e])},getRectFromBounds:function(e){var t=e.getNorthEast(),r=e.getSouthWest();return[[t.lng,t.lat],[t.lng,r.lat],[r.lng,r.lat],[r.lng,t.lat],[t.lng,t.lat]]},searchAdress:function(e){this.myLayer.clearLayers();var t="",r=this.$refs.geojson.mapObject.getLayers();if("polygon"==this.addressMethod){var a,s,o=Object(ie["a"])(r);try{for(o.s();!(s=o.n()).done;){var n,i=s.value,l=Object(ie["a"])(i.feature.geometry.coordinates);try{for(l.s();!(n=l.n()).done;){var c=n.value;if(a=1==c.length?c[0]:c,ge()([e.lng,e.lat],a))return this.myLayer.addData(i.feature),i.feature.properties.ward_ja}}catch(w){l.e(w)}finally{l.f()}}}catch(w){o.e(w)}finally{o.f()}}else if("box"==this.addressMethod){var u,d=[],m=Object(ie["a"])(r);try{for(m.s();!(u=m.n()).done;){var h=u.value;if(h.getBounds().contains(e)){var p={type:"Feature",geometry:{type:"Polygon",coordinates:[this.getRectFromBounds(h.getBounds())]}},v=h.getCenter(),f=this.$refs.map.mapObject.distance(e,v).toFixed(1);d.push([f,h.feature.properties.ward_ja]);var g={type:"Feature",geometry:{type:"Point",coordinates:[v.lng,v.lat]}},b={type:"Feature",geometry:{type:"LineString",coordinates:[[e.lng,e.lat],[v.lng,v.lat]]}};this.myLayer.addData(p),this.myLayer.addData(g),this.myLayer.addData(b),ce.a.popup().setLatLng(v).setContent("<div>".concat(h.feature.properties.ward_ja,"(").concat(f,"m)</div>")).addTo(this.myLayer)}}}catch(w){m.e(w)}finally{m.f()}if(d.length)return d.sort()[0][1]}return t}}},we=be,De=(r("f0e8"),Object(x["a"])(we,oe,ne,!1,null,"3e0a179e",null)),Ce=De.exports;a["default"].use(m["a"]);var ye=[{path:"/",name:"Login",meta:{title:"ログイン",prevPath:""},component:S},{path:"/menu",name:"Menu",meta:{title:"メニュー",prevPath:""},component:j},{path:"/uploadPhoto",name:"UploadPhoto",meta:{title:"Photo Upload",prevPath:"/menu"},component:B},{path:"/users",name:"Users",meta:{title:"ユーザメンテ",prevPath:"/menu"},component:V},{path:"/userupdate",name:"UserUpdate",meta:{title:"ユーザ更新/削除画面",prevPath:"/users"},component:Y},{path:"/userregister",name:"UserRegister",meta:{title:"ユーザ新規登録画面",prevPath:"/users"},component:se},{path:"/position",name:"Position",meta:{title:"位置情報",prevPath:"/menu"},component:Ce}],ke=new m["a"]({routes:ye}),Re=ke;function xe(e,t){var r=[],a=[];for(var s in e)r.push({key:s,label:e[s]});if(t){for(var o in t)a.push(r[t[o]]);return a}return r}function Le(e,t){Te("menuCurrentPathNew",t),d.dispatch("pushMenuPath",e),Re.push({path:t})}function Se(){var e=d.getters.getLastMenuPath;"/menu"==e&&Ie(Me()),Te("menuCurrentPathNew",e),d.dispatch("popMenuPath"),Re.push({path:e})}function Me(){return Pe("menuCurrentPathNew")}function Ae(){var e=Pe("menuCurrentPathNew"),t=Pe("menuInfoByPath"),r=t[e];return r.name}function Ee(){return d.getters.getLastMenuPath}function Te(e,t){d.dispatch("saveCommonArea",{commonKey:e,commonVal:t})}function Pe(e){return d.getters.loadCommonArea(e)}function je(e){d.dispatch("deleteCommonArea",e)}function Ie(e){d.dispatch("resetCommonArea",e)}function Ue(e){return e.data.resultCode+": "+e.data.resultMessage}function _e(e){if(null==e.response)return e;if(e.response.data){if(e.response.data.error)return e.response.data.error+": "+e.response.data.message;if(e.response.data.status)return e.response.data.status.code+": "+e.response.data.status.message}}function Oe(e,t,r){var a=0,s=setInterval((function(){a++,a>=t&&(clearInterval(s),r&&r())}),e)}function $e(e){return new Promise((function(t){setTimeout(t,e)}))}function Be(e,t){var r=0;for(var a in t){if(a==e)break;r++}return r}function Ne(e,t){var r=[],a={},s=0;for(var o in t)a[o]=s++;for(var n in e){var i=a[e[n]];null!=i&&r.push(i)}return r}function Fe(e){var t={};for(var r in e)t[e[r].key]=r;return t}function He(e){var t={};for(var r in e)t[r]=e[r].key;return t}function ze(e,t){if(t){if(document.getElementsByClassName(e).length){var r=document.getElementsByClassName(e)[0].children[0].children[0];r.children[0].removeAttribute("hidden"),r.children[1].removeAttribute("hidden"),r.children[2].removeAttribute("hidden");var a=document.getElementsByClassName(e)[0],s=a.getElementsByTagName("table")[0];a.classList.remove("table-sm","table-bordered","b-table-sticky-header","table-responsive"),Te("printTableMaxHeight",a.style.maxHeight),a.removeAttribute("style"),s.classList.remove("b-table-no-border-collapse","table","b-table");for(var o=Object(l["a"])(s.querySelectorAll("tbody>tr")),n=0;n<o.length;n++)if("true"===o[n].getAttribute("aria-selected")){o[n].classList.remove("b-table-row-selected","table-info"),Te("printSelectedRow",n);break}Object(l["a"])(document.getElementsByClassName("card")).map((function(e){return e.classList.remove("bg-light")})),s.setAttribute("style","width: 100%;");var i="border-bottom: 1px solid #dee2e6; border-collapse: collapse; color: black;",c="border-left: 1px solid #dee2e6; border-right: 1px solid #dee2e6; border-top: none; border-bottom: none; border-bottom-width: 1px; border-collapse: collapse; color: black; padding: .5rem;",u="border-left: 1px solid #dee2e6; border-right: 1px solid #dee2e6; border-top: none; border-collapse: collapse; padding: .5rem;",d=s.getElementsByTagName("tr");Object(l["a"])(d).map((function(e,t){e.style.cssText+=0===t?i+"border-bottom: none;":1===t?i+"border-top: none; border-bottom: none;":2===t?i+"border-top: none;":i}));var m=s.getElementsByTagName("th");Object(l["a"])(m).map((function(e,t){0===t||2===t?e.setAttribute("style","padding-top: 1rem;"):1===t?e.setAttribute("style","text-align:center; font-size: 2em;"):e.setAttribute("style",c)}));var h=s.getElementsByTagName("td");Object(l["a"])(h).map((function(e){return e.style.cssText+=u}));var p=Pe("printTableLineDelCells"),v=Pe("printTableResDtTitle");if(p){var f=Ne(p,v),g=r.getElementsByTagName("tr");g[3].style.removeProperty("border-bottom"),Object(l["a"])(g[3].getElementsByTagName("th")).map((function(e,t){f.includes(t)||e.style.setProperty("border-bottom","1px solid #dee2e6")}))}}}else if(document.getElementsByClassName(e).length){var b=document.getElementsByClassName(e)[0].children[0].children[0];b.children[0].setAttribute("hidden",""),b.children[1].setAttribute("hidden",""),b.children[2].setAttribute("hidden",""),Object(l["a"])(document.getElementsByClassName("card")).map((function(e){return e.classList.add("bg-light")}));var w=document.getElementsByClassName(e)[0],D=w.getElementsByTagName("table")[0];w.classList.add("table-sm","table-bordered","b-table-sticky-header","table-responsive");var C="max-height: "+Pe("printTableMaxHeight");je("printTableMaxHeight"),w.setAttribute("style",C),D.classList.add("b-table-no-border-collapse","table","b-table"),void 0!==Pe("printSelectedRow")&&(Object(l["a"])(D.querySelectorAll("tbody>tr"))[Pe("printSelectedRow")].classList.add("b-table-row-selected","table-info"),je("printSelectedRow"));var y=D.getElementsByTagName("tr");Object(l["a"])(y).map((function(e){var t=e.style.backgroundColor;e.removeAttribute("style"),e.style.backgroundColor=t}));var k=D.getElementsByTagName("th");Object(l["a"])(k).map((function(e){return e.removeAttribute("style")}));var R=D.getElementsByTagName("td");Object(l["a"])(R).map((function(e){var t=e.style.backgroundColor;e.removeAttribute("style"),e.style.backgroundColor=t}))}}function qe(e,t,r,a){var s=document.getElementsByClassName(e)[0].children[0].children[0];if(!(s.getElementsByTagName("tr").length>3)){var o=new Date(Date.now()),n=60*o.getTimezoneOffset()*1e3,i=new Date(o-n).toISOString().slice(0,10),l=o.toTimeString().slice(0,8),c=document.createTextNode(a),u=document.createElement("tr"),d=document.createElement("th");u.setAttribute("hidden",""),d.appendChild(c),d.setAttribute("colspan",t),u.appendChild(d),s.prepend(u);var m=document.createTextNode(r),h=document.createTextNode(i+" "+l),p=document.createElement("span");p.setAttribute("style","float:right; font-size: 14px;"),u=document.createElement("tr"),d=document.createElement("th"),u.setAttribute("hidden",""),p.appendChild(h),d.appendChild(m),d.appendChild(p),d.setAttribute("colspan",t),u.appendChild(d),s.prepend(u),u=document.createElement("tr"),d=document.createElement("th"),u.setAttribute("hidden",""),d.setAttribute("colspan",t),u.appendChild(d),s.prepend(u)}}function We(e,t){var r,a=Ae(),s=Ke(a);if(null!=s)for(var o=s["prodBackColor"],n=s["procBackColor"],i=null===(r=t.listProgress)||void 0===r?void 0:r.length,c=document.querySelector(".".concat(e,">.table>tbody")),u=Object(l["a"])(c.querySelectorAll("tr")),d=0;d<u.length;d++){var m,h=Object(l["a"])(u[d].querySelectorAll("td")),p=null===(m=h[h.length-1].innerText)||void 0===m?void 0:m.slice(-5);if("**-**"!==p&&""!==p)for(var v=0;v<h.length;v++)h[v].style.backgroundColor=o;else for(var f=h.length-i;f<h.length;f++){var g;p=null===(g=h[f].innerText)||void 0===g?void 0:g.slice(-5),"**-**"!==p&&""!==p&&(h[f].style.backgroundColor=n)}}}function Ve(e,t){if(null!=t){var r={};for(var a in t){var s=t[a],o=s["nameSection"];if(o==e){var n=s["nameAlpha"],i=void 0,l=void 0,c=s["nameLong"].split(",");for(var u in c){var d=c[u].trim().split("=");"prodBackColor"==d[0].trim()?i=d[1].trim():"procBackColor"==d[0].trim()&&(l=d[1].trim())}r[n]={prodBackColor:i,procBackColor:l}}}return r}}function Ke(e){var t=Pe("progressBackColorScreen");if(null!=t){var r=t[e];if(null!=r)return r}}var Ge={createFields:xe,clickMenuForward:Le,clickMenuBack:Se,saveCommonArea:Te,loadCommonArea:Pe,deleteCommonArea:je,resetCommonArea:Ie,getResponseMessage:Ue,getErrorMessage:_e,sleep:Oe,wait:$e,getCurrentMenu:Me,getCurrentMenuName:Ae,getParentMenu:Ee,getColIndex:Be,makeResDtIndexRight:Ne,makeResDtName2Index:Fe,makeResDtIndex2Name:He,printDesingHandler:ze,printPrepare:qe,progressColor:We,convertProgressBackColorScreen:Ve,getProgressBackColorScreen:Ke},Je={created:function(){this.$store.state.loginData.accessToken||"/"===this.$route.path||this.$router.push("/")},methods:{clickMenuBack:function(){"/userupdate"==this.$route.path&&(this.$store.state.responseData=""),Ge.clickMenuBack()},registerUser:function(){this.$store.state.responseData="",1==this.searchedUser&&Ge.saveCommonArea(this.currentMenuName+"_searchForm",this.searchForm),Ge.clickMenuForward(this.$route.path,"userregister")},clicklogout:function(){this.$store.state.loginData={id:"",username:"",email:"",roles:[],accessToken:""},this.$router.push("/")}}},Xe=Je,Qe=(r("034f"),Object(x["a"])(Xe,n,i,!1,null,null,null)),Ye=Qe.exports,Ze=r("9483");Object(Ze["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("6cc5");delete le["Icon"].Default.prototype._getIconUrl,le["Icon"].Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")}),a["default"].config.productionTip=!1,a["default"].use(s["a"]),a["default"].use(o["a"]),new a["default"]({store:d,router:Re,render:function(e){return e(Ye)}}).$mount("#app")},6945:function(e,t,r){},"6cb4":function(e,t,r){"use strict";r("c19e")},"6f7c":function(e,t,r){"use strict";r("ff31")},8116:function(e,t,r){"use strict";r("dd5a")},"85ec":function(e,t,r){},c19e:function(e,t,r){},d726:function(e,t,r){e.exports=r.p+"img/warehouse.fcab4990.png"},d863:function(e,t,r){e.exports=r.p+"media/message.c2fd3cfb.mp3"},dd5a:function(e,t,r){},f0e8:function(e,t,r){"use strict";r("2854")},ff31:function(e,t,r){}});
//# sourceMappingURL=app.6371dcb7.js.map